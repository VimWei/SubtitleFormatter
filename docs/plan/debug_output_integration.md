# DebugOutput é›†æˆè®¡åˆ’

## ğŸ“‹ æ¦‚è¿°

ç¡®ä¿ç°æœ‰çš„ä¼˜ç§€è°ƒè¯•è¾“å‡ºç³»ç»Ÿ `DebugOutput` èƒ½å¤Ÿå®Œç¾é€‚é…æ–°çš„å†…æ ¸æµç¨‹ï¼Œä¿æŒè¯¦ç»†çš„å¤„ç†æ­¥éª¤è®°å½•å’Œä¸­é—´ç»“æœæ–‡ä»¶ä¿å­˜åŠŸèƒ½ã€‚

## ğŸ” ç°çŠ¶åˆ†æ

### DebugOutput ä¼˜åŠ¿
- âœ… å¤„ç†æ­¥éª¤çš„ä¸­é—´ç»“æœæ–‡ä»¶ä¿å­˜
- âœ… ç”Ÿæˆè¯¦ç»†çš„å¤„ç†æ—¥å¿—æ–‡ä»¶
- âœ… è‡ªåŠ¨æ­¥éª¤åºå·ç®¡ç†
- âœ… ç»Ÿè®¡ä¿¡æ¯æ”¶é›†å’Œå±•ç¤º
- âœ… æ—¶é—´æˆ³å’Œæ–‡ä»¶å‘½åç®¡ç†

### å½“å‰æ”¯æŒçš„æ­¥éª¤
- è¯»å…¥æ–‡ä»¶
- æ–‡æœ¬æ¸…ç†
- æ™ºèƒ½æ–­å¥
- åœé¡¿è¯å¤„ç†
- æ™ºèƒ½æ–­è¡Œ

## ğŸ¯ é›†æˆç›®æ ‡

### é€‚é…æ–°æµç¨‹
- ğŸ”„ æ”¯æŒæ–°çš„å¤„ç†æ­¥éª¤ï¼šæ ‡ç‚¹æ¢å¤ã€å¥å­åˆ†å‰²ã€å¥å­æ‹†åˆ†
- ğŸ“ ä¿æŒä¸­é—´ç»“æœæ–‡ä»¶ä¿å­˜åŠŸèƒ½
- ğŸ¯ ä¿æŒç»Ÿè®¡ä¿¡æ¯æ”¶é›†å’Œå±•ç¤º
- ğŸ“Š ä¿æŒå¤„ç†æ—¥å¿—ç”ŸæˆåŠŸèƒ½

### ä¿æŒç°æœ‰åŠŸèƒ½
- âœ… è‡ªåŠ¨æ­¥éª¤åºå·ç®¡ç†
- âœ… æ—¶é—´æˆ³å’Œæ–‡ä»¶å‘½å
- âœ… ç»Ÿè®¡ä¿¡æ¯æ ¼å¼åŒ–
- âœ… è°ƒè¯•æ¨¡å¼æ§åˆ¶

## ğŸ“ è¯¦ç»†å®æ–½è®¡åˆ’

### é˜¶æ®µä¸€ï¼šæ­¥éª¤æ˜ å°„æ›´æ–° (1å¤©)

#### 1.1 æ–°æ­¥éª¤åç§°æ˜ å°„
```python
# æ›´æ–°æ­¥éª¤åç§°æ˜ å°„
new_step_mappings = {
    "æ ‡ç‚¹æ¢å¤": "punctuation_adder",
    "å¥å­åˆ†å‰²": "text_to_sentences", 
    "å¥å­æ‹†åˆ†": "sentence_splitter"
}
```

#### 1.2 ç»Ÿè®¡ä¿¡æ¯é€‚é…
- é€‚é… `punctuation_adder` çš„ç»Ÿè®¡ä¿¡æ¯
- é€‚é… `text_to_sentences` çš„ç»Ÿè®¡ä¿¡æ¯
- é€‚é… `sentence_splitter` çš„ç»Ÿè®¡ä¿¡æ¯

### é˜¶æ®µäºŒï¼šåŠŸèƒ½å®ç° (1å¤©)

#### 2.1 æ–°æ­¥éª¤å¤„ç†é€»è¾‘
```python
def show_step(self, step_name, content, stats=None):
    # æ·»åŠ æ–°æ­¥éª¤çš„å¤„ç†é€»è¾‘
    if step_name == "æ ‡ç‚¹æ¢å¤":
        # å¤„ç†æ ‡ç‚¹æ¢å¤çš„ç»Ÿè®¡ä¿¡æ¯
        pass
    elif step_name == "å¥å­åˆ†å‰²":
        # å¤„ç†å¥å­åˆ†å‰²çš„ç»Ÿè®¡ä¿¡æ¯
        pass
    elif step_name == "å¥å­æ‹†åˆ†":
        # å¤„ç†å¥å­æ‹†åˆ†çš„ç»Ÿè®¡ä¿¡æ¯
        pass
```

#### 2.2 æ–‡ä»¶ä¿å­˜é€»è¾‘
- ä¿æŒç°æœ‰çš„æ–‡ä»¶ä¿å­˜æœºåˆ¶
- é€‚é…æ–°æ­¥éª¤çš„è¾“å‡ºæ ¼å¼
- ä¿æŒæ–‡ä»¶å‘½åè§„åˆ™

## ğŸ”§ æŠ€æœ¯å®ç°è¦ç‚¹

### 1. æ–°æ­¥éª¤ç»Ÿè®¡ä¿¡æ¯
```python
# æ ‡ç‚¹æ¢å¤ç»Ÿè®¡
elif step_name == "æ ‡ç‚¹æ¢å¤":
    if stats:
        log_lines.append("\næ ‡ç‚¹æ¢å¤ç»Ÿè®¡:")
        log_lines.append("-" * 40)
        log_lines.append(f"å¤„ç†æ–‡æœ¬é•¿åº¦: {stats.get('text_length', 0)} å­—ç¬¦")
        log_lines.append(f"æ¢å¤æ ‡ç‚¹æ•°é‡: {stats.get('punctuation_count', 0)} ä¸ª")
        log_lines.append(f"å¤„ç†æ—¶é—´: {stats.get('processing_time', 0):.2f} ç§’")
        log_lines.append("-" * 40)

# å¥å­åˆ†å‰²ç»Ÿè®¡
elif step_name == "å¥å­åˆ†å‰²":
    if isinstance(content, list):
        log_lines.append(f"\nå¥å­åˆ†å‰²ç»Ÿè®¡:")
        log_lines.append("-" * 40)
        log_lines.append(f"å…±åˆ†å‰²å‡º {len(content)} ä¸ªå¥å­")
        log_lines.append(f"æœ€é•¿å¥å­: {len(max(content, key=len))} å­—ç¬¦")
        log_lines.append(f"æœ€çŸ­å¥å­: {len(min(content, key=len))} å­—ç¬¦")
        log_lines.append(f"å¹³å‡å¥é•¿: {sum(len(s) for s in content) / len(content):.1f} å­—ç¬¦")
        log_lines.append("-" * 40)

# å¥å­æ‹†åˆ†ç»Ÿè®¡
elif step_name == "å¥å­æ‹†åˆ†":
    if stats:
        log_lines.append("\nå¥å­æ‹†åˆ†ç»Ÿè®¡:")
        log_lines.append("-" * 40)
        log_lines.append(f"åŸå§‹å¥å­æ•°: {stats.get('original_sentences', 0)}")
        log_lines.append(f"æ‹†åˆ†åå¥å­æ•°: {stats.get('split_sentences', 0)}")
        log_lines.append(f"æ‹†åˆ†æ¯”ä¾‹: {stats.get('split_ratio', 0):.1f}%")
        log_lines.append(f"æœ€é•¿æ‹†åˆ†æ·±åº¦: {stats.get('max_depth', 0)}")
        log_lines.append("-" * 40)
```

### 2. æ–‡ä»¶ä¿å­˜é€‚é…
- ä¿æŒç°æœ‰çš„æ–‡ä»¶å‘½åè§„åˆ™
- é€‚é…æ–°æ­¥éª¤çš„è¾“å‡ºæ ¼å¼
- ä¿æŒæ–‡ä»¶ç¼–ç å’Œæ ¼å¼

### 3. ç»Ÿè®¡ä¿¡æ¯æ”¶é›†
- ä»æ–°ç»„ä»¶æ”¶é›†ç»Ÿè®¡ä¿¡æ¯
- ä¿æŒç»Ÿè®¡ä¿¡æ¯çš„å®Œæ•´æ€§
- ç¡®ä¿ç»Ÿè®¡ä¿¡æ¯çš„å‡†ç¡®æ€§

## ğŸ“š å‚è€ƒæ–‡æ¡£

- `src/subtitleformatter/utils/debug_output.py` - è°ƒè¯•è¾“å‡ºç³»ç»Ÿ
- `src/subtitleformatter/utils/unified_logger.py` - ç»Ÿä¸€æ—¥å¿—ç³»ç»Ÿ

## âš ï¸ æ³¨æ„äº‹é¡¹

### å…¼å®¹æ€§
- ç¡®ä¿ç°æœ‰è°ƒè¯•åŠŸèƒ½ä¸å—å½±å“
- ä¿æŒæ–‡ä»¶æ ¼å¼çš„ä¸€è‡´æ€§
- ç¡®ä¿ç»Ÿè®¡ä¿¡æ¯çš„å‡†ç¡®æ€§

### æ€§èƒ½
- é¿å…æ–‡ä»¶I/Oå½±å“å¤„ç†æ€§èƒ½
- åˆç†æ§åˆ¶è°ƒè¯•ä¿¡æ¯çš„è¯¦ç»†ç¨‹åº¦
- ä¼˜åŒ–æ–‡ä»¶ä¿å­˜æ“ä½œ

## ğŸš€ å®æ–½æ—¶é—´è¡¨

| é˜¶æ®µ | ä»»åŠ¡ | é¢„è®¡æ—¶é—´ | ä¼˜å…ˆçº§ |
|------|------|----------|--------|
| 1 | æ­¥éª¤æ˜ å°„æ›´æ–° | 1å¤© | é«˜ |
| 2 | åŠŸèƒ½å®ç° | 1å¤© | é«˜ |
| **æ€»è®¡** | | **2å¤©** | **é«˜** |

## ğŸ“‹ éªŒæ”¶æ ‡å‡†

### åŠŸèƒ½éªŒæ”¶
- [ ] æ–°æ­¥éª¤çš„ç»Ÿè®¡ä¿¡æ¯æ­£ç¡®æ˜¾ç¤º
- [ ] ä¸­é—´ç»“æœæ–‡ä»¶æ­£ç¡®ä¿å­˜
- [ ] å¤„ç†æ—¥å¿—æ­£ç¡®ç”Ÿæˆ
- [ ] æ–‡ä»¶å‘½åè§„åˆ™æ­£ç¡®

### å…¼å®¹æ€§éªŒæ”¶
- [ ] ç°æœ‰è°ƒè¯•åŠŸèƒ½æ­£å¸¸å·¥ä½œ
- [ ] æ–‡ä»¶æ ¼å¼ä¿æŒä¸€è‡´
- [ ] ç»Ÿè®¡ä¿¡æ¯å‡†ç¡®å®Œæ•´

---

**æ³¨æ„**: æ­¤è®¡åˆ’ä¸ºé«˜ä¼˜å…ˆçº§äº‹é¡¹ï¼Œéœ€è¦åœ¨ä¸»è¦é‡æ„è¿‡ç¨‹ä¸­åŒæ­¥è¿›è¡Œã€‚
